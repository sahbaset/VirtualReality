<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@decentraland/handsfree@latest/dist/handsfree.min.js"></script>
    <script>
      AFRAME.registerComponent('hand-interaction', {
        init: function () {
          this.el.addEventListener('pinchstarted', (event) => {
            let obj = event.detail.targetEl;
            if (obj) {
              obj.setAttribute('animation', {
                property: 'position',
                to: `${Math.random() * 2 - 1} ${Math.random() * 2} ${Math.random() * -2}`,
                dur: 1000,
                easing: 'easeInOutQuad'
              });
            }
          });
        }
      });
      
      AFRAME.registerComponent('spawn-object', {
        init: function () {
          this.el.addEventListener('pinchstarted', (event) => {
            let scene = document.querySelector('a-scene');
            let newObj = document.createElement('a-entity');
            let shapes = ['box', 'sphere', 'cylinder'];
            let colors = ['red', 'blue', 'green', 'yellow', 'purple'];
            let shape = shapes[Math.floor(Math.random() * shapes.length)];
            let color = colors[Math.floor(Math.random() * colors.length)];
            
            newObj.setAttribute('geometry', `primitive: ${shape}; height: 0.2; width: 0.2; depth: 0.2; radius: 0.2`);
            newObj.setAttribute('material', `color: ${color}`);
            newObj.setAttribute('position', `${Math.random() * 2 - 1} ${Math.random() * 2} ${Math.random() * -2}`);
            newObj.setAttribute('hand-interaction', '');
            
            scene.appendChild(newObj);
          });
        }
      });
    </script>
  </head>
  <body>
    <a-scene xrextras-gesture-detector webxr="optionalFeatures: hit-test">
      <!-- Camera with hand tracking -->
      <a-camera position="0 1.6 0">
        <a-entity hand-tracking-controls="left"></a-entity>
        <a-entity hand-tracking-controls="right" spawn-object></a-entity>
      </a-camera>
      
      <!-- Real-world environment integration -->
      <a-light type="directional" intensity="0.8" position="1 3 1"></a-light>
      
      <!-- Interactive objects -->
      <a-entity geometry="primitive: sphere; radius: 0.2" material="color: red" position="0 1 -1" hand-interaction></a-entity>
      <a-entity geometry="primitive: box; depth: 0.2; height: 0.2; width: 0.2" material="color: blue" position="-0.5 1.2 -1.2" hand-interaction></a-entity>
      <a-entity geometry="primitive: cylinder; radius: 0.15; height: 0.3" material="color: green" position="0.5 1.3 -1.5" hand-interaction></a-entity>
    </a-scene>
  </body>
</html>
