<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>
    <script>
      AFRAME.registerComponent('hand-interaction', {
        init: function () {
          this.el.addEventListener('click', (event) => {
            let obj = event.detail.targetEl || this.el;
            obj.setAttribute('animation', {
              property: 'position',
              to: `${Math.random() * 2 - 1} ${Math.random() * 2} ${Math.random() * -2}`,
              dur: 1000,
              easing: 'easeInOutQuad'
            });
          });
        }
      });
      
      AFRAME.registerComponent('spawn-object', {
        init: function () {
          this.el.addEventListener('click', (event) => {
            let scene = document.querySelector('a-scene');
            let newObj = document.createElement('a-entity');
            let shapes = ['box', 'sphere', 'cylinder'];
            let colors = ['red', 'blue', 'green', 'yellow', 'purple'];
            let shape = shapes[Math.floor(Math.random() * shapes.length)];
            let color = colors[Math.floor(Math.random() * colors.length)];
            
            newObj.setAttribute('geometry', `primitive: ${shape}; height: 0.2; width: 0.2; depth: 0.2; radius: 0.2`);
            newObj.setAttribute('material', `color: ${color}`);
            newObj.setAttribute('position', `${Math.random() * 2 - 1} ${Math.random() * 2} ${Math.random() * -2}`);
            newObj.setAttribute('hand-interaction', '');
            newObj.setAttribute('class', 'interactive');
            newObj.setAttribute('raycaster-target', '');
            
            scene.appendChild(newObj);
          });
        }
      });
    </script>
  </head>
  <body>
    <a-scene 
      background="transparent: true" 
      webxr="requiredFeatures: hit-test,local-floor,hand-tracking,mesh-detection; optionalFeatures: dom-overlay,real-world-meshing; overlayElement: #overlay;">
      
      <!-- Camera with hand tracking -->
      <a-entity camera position="0 1.6 0" look-controls="enabled: true">
        <a-entity id="leftHand" hand-tracking-controls="hand: left; modelColor: #ffcccc"></a-entity>
        <a-entity id="rightHand" hand-tracking-controls="hand: right; modelColor: #ccccff" spawn-object raycaster="objects: .interactive; showLine: true; far: 3;"></a-entity>
      </a-entity>
      
      <!-- Real-world lighting -->
      <a-entity light="type: ambient; intensity: 0.5;"></a-entity>
      <a-entity light="type: directional; intensity: 0.8; position: 1 3 1;"></a-entity>
      
      <!-- Interactive objects -->
      <a-entity class="interactive" geometry="primitive: sphere; radius: 0.2" material="color: red" position="0 1 -1" hand-interaction raycaster-target></a-entity>
      <a-entity class="interactive" geometry="primitive: box; depth: 0.2; height: 0.2; width: 0.2" material="color: blue" position="-0.5 1.2 -1.2" hand-interaction raycaster-target></a-entity>
      <a-entity class="interactive" geometry="primitive: cylinder; radius: 0.15; height: 0.3" material="color: green" position="0.5 1.3 -1.5" hand-interaction raycaster-target></a-entity>
    </a-scene>
    
    <div id="overlay" style="display: none;">
      <!-- Optional DOM overlay -->
    </div>
  </body>
</html>